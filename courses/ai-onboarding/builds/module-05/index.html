<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Module 5: Build Your Playbook | SOPs Nobody Reads</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;0,900;1,400&family=Source+Serif+4:ital,wght@0,300;0,400;0,600;1,300;1,400&family=DM+Sans:wght@400;500;600&display=swap');

:root {
  --bg-dark: #1a1812;
  --bg-card: #2a2620;
  --bg-warm: #332e26;
  --cream: #f0e8d8;
  --cream-dim: #c8bfad;
  --olive: #5c6b4f;
  --olive-light: #7a8c6a;
  --rust: #b8704a;
  --rust-light: #d4956a;
  --gold: #c9a84c;
  --gold-dim: #8a7535;
  --red-dim: #8b3a3a;
  --green-dim: #4a6b4a;
  --charcoal: #3a3632;
  --font-display: 'Playfair Display', Georgia, serif;
  --font-body: 'Source Serif 4', Georgia, serif;
  --font-ui: 'DM Sans', 'Segoe UI', sans-serif;
}

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

html, body {
  height: 100%;
  overflow: hidden;
  background: var(--bg-dark);
  color: var(--cream);
}

.grain {
  position: fixed;
  top: -50%; left: -50%;
  width: 200%; height: 200%;
  pointer-events: none;
  z-index: 9999;
  opacity: 0.035;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
  animation: grainShift 0.5s steps(4) infinite;
}
@keyframes grainShift {
  0% { transform: translate(0, 0); }
  25% { transform: translate(-2%, -1%); }
  50% { transform: translate(1%, 2%); }
  75% { transform: translate(-1%, -2%); }
  100% { transform: translate(2%, 1%); }
}

.vignette {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 9998;
  background: radial-gradient(ellipse at center, transparent 50%, rgba(10,8,4,0.6) 100%);
}

.player {
  position: relative;
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  font-family: var(--font-body);
}

.slide-container {
  flex: 1;
  position: relative;
  overflow: hidden;
}

.slide {
  position: absolute;
  inset: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 4vh 8vw;
  opacity: 0;
  transition: opacity 0.6s ease;
  pointer-events: none;
  background-color: var(--bg-dark);
}
.slide.active {
  opacity: 1;
  pointer-events: auto;
}

.slide.has-image {
  background-size: cover;
  background-position: center;
}
.slide.has-image::before {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(ellipse at center, rgba(0,0,0,0.6) 0%, rgba(0,0,0,0.82) 100%);
  z-index: 1;
}

.slide > * {
  position: relative;
  z-index: 2;
}

.module-label {
  font-family: var(--font-ui);
  font-size: clamp(0.7rem, 1.1vw, 0.9rem);
  text-transform: uppercase;
  letter-spacing: 0.4em;
  color: var(--gold);
  margin-bottom: 3vh;
  font-weight: 600;
}
.slide-title h1 {
  font-family: var(--font-display);
  font-size: clamp(2.5rem, 6vw, 5rem);
  font-weight: 900;
  line-height: 0.95;
  text-align: center;
  margin-bottom: 3vh;
  color: var(--cream);
}
.subtitle {
  font-family: var(--font-display);
  font-size: clamp(1rem, 1.8vw, 1.4rem);
  color: var(--cream-dim);
  font-style: italic;
  text-align: center;
  margin-bottom: 5vh;
  font-weight: 400;
}
.brand {
  font-family: var(--font-ui);
  font-size: clamp(0.7rem, 1vw, 0.85rem);
  text-transform: uppercase;
  letter-spacing: 0.3em;
  color: var(--gold-dim);
  font-weight: 500;
}

.scene-label {
  font-family: var(--font-ui);
  font-size: clamp(0.75rem, 1.1vw, 0.9rem);
  text-transform: uppercase;
  letter-spacing: 0.3em;
  color: var(--rust);
  margin-bottom: 4vh;
  font-weight: 600;
}
.scene-text {
  font-family: var(--font-display);
  font-size: clamp(1.3rem, 2.4vw, 2rem);
  line-height: 1.4;
  font-style: italic;
  text-align: center;
  max-width: 70vw;
  color: var(--cream);
  font-weight: 400;
}
.scene-text em {
  color: var(--rust-light);
  font-style: italic;
}

.kicker {
  font-family: var(--font-ui);
  font-size: clamp(0.7rem, 1.1vw, 0.9rem);
  text-transform: uppercase;
  letter-spacing: 0.3em;
  color: var(--gold);
  margin-bottom: 2vh;
  font-weight: 600;
}
.slide-keypoint h2 {
  font-family: var(--font-display);
  font-size: clamp(2.2rem, 4.5vw, 3.5rem);
  font-weight: 700;
  line-height: 1.1;
  text-align: center;
  margin-bottom: 3vh;
  color: var(--cream);
}
.body {
  font-family: var(--font-body);
  font-size: clamp(1rem, 1.4vw, 1.15rem);
  line-height: 1.6;
  text-align: center;
  max-width: 65vw;
  color: var(--cream-dim);
  font-weight: 300;
}

.reveal-kicker {
  font-family: var(--font-ui);
  font-size: clamp(0.8rem, 1.2vw, 1rem);
  text-transform: uppercase;
  letter-spacing: 0.3em;
  color: var(--gold);
  margin-bottom: 3vh;
  font-weight: 600;
}
.slide-reveal h2 {
  font-family: var(--font-display);
  font-size: clamp(2.5rem, 5vw, 4rem);
  font-weight: 900;
  line-height: 1;
  text-align: center;
  margin-bottom: 3vh;
  color: var(--cream);
}
.slide-reveal .body {
  font-style: italic;
  font-weight: 400;
}

.concept-label {
  font-family: var(--font-ui);
  font-size: clamp(0.7rem, 1.1vw, 0.9rem);
  text-transform: uppercase;
  letter-spacing: 0.3em;
  color: var(--gold);
  margin-bottom: 3vh;
  font-weight: 600;
}
.concept-box {
  background: rgba(240,232,216,0.04);
  border: 1px solid rgba(240,232,216,0.12);
  border-radius: 4px;
  padding: 3vh 3vw;
  margin-bottom: 3vh;
  backdrop-filter: blur(4px);
}
.concept-box h2 {
  font-family: var(--font-display);
  font-size: clamp(1.3rem, 2.2vw, 1.8rem);
  font-weight: 700;
  line-height: 1.3;
  text-align: center;
  color: var(--cream);
}

.list-label {
  font-family: var(--font-ui);
  font-size: clamp(0.75rem, 1.1vw, 0.9rem);
  text-transform: uppercase;
  letter-spacing: 0.3em;
  color: var(--gold);
  margin-bottom: 3vh;
  font-weight: 600;
}
.slide-list {
  padding-left: 10vw;
  padding-right: 10vw;
}
.slide-list h2 {
  font-family: var(--font-display);
  font-size: clamp(1.8rem, 3.2vw, 2.5rem);
  font-weight: 700;
  line-height: 1.2;
  text-align: left;
  margin-bottom: 3vh;
  color: var(--cream);
}
.list-items {
  list-style: none;
}
.list-items li {
  display: flex;
  margin-bottom: 2.5vh;
  font-family: var(--font-body);
  font-size: clamp(1rem, 1.3vw, 1.1rem);
  line-height: 1.6;
  color: var(--cream-dim);
  font-weight: 300;
}
.list-items li::before {
  content: attr(data-num);
  font-family: var(--font-ui);
  font-size: clamp(0.9rem, 1.2vw, 1rem);
  font-weight: 600;
  color: var(--gold);
  margin-right: 2vw;
  flex-shrink: 0;
  width: 3em;
}
.list-items li strong {
  color: var(--cream);
  font-weight: 600;
}

.slide-summary {
  text-align: center;
  background: linear-gradient(170deg, #252218 0%, var(--bg-dark) 100%);
}
.slide-summary h2 {
  font-family: var(--font-display);
  font-size: clamp(1.8rem, 3vw, 2.4rem);
  font-weight: 700;
  margin-bottom: 4vh;
  color: var(--cream);
}
.summary-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 1.5vh;
  max-width: 80vw;
  width: 100%;
}
.summary-item {
  background: rgba(240,232,216,0.04);
  border: 1px solid rgba(240,232,216,0.08);
  border-radius: 3px;
  padding: 2vh 2vw;
  font-family: var(--font-body);
  font-size: clamp(0.9rem, 1.1vw, 1rem);
  line-height: 1.5;
  color: var(--cream-dim);
  text-align: left;
  font-weight: 300;
}
.summary-item::before {
  content: '—';
  color: var(--gold-dim);
  margin-right: 0.5em;
  font-weight: 600;
}

.slide-quiz {
  text-align: center;
  padding-top: 8vh;
}
.quiz-label {
  font-family: var(--font-ui);
  font-size: clamp(0.75rem, 1.1vw, 0.9rem);
  text-transform: uppercase;
  letter-spacing: 0.3em;
  color: var(--gold);
  margin-bottom: 1vh;
  font-weight: 600;
}
.quiz-counter {
  font-family: var(--font-ui);
  font-size: clamp(0.7rem, 1vw, 0.85rem);
  color: var(--cream-dim);
  margin-bottom: 4vh;
  font-weight: 400;
}
.slide-quiz h2 {
  font-family: var(--font-display);
  font-size: clamp(1.4rem, 2.4vw, 1.9rem);
  font-weight: 700;
  line-height: 1.3;
  margin-bottom: 4vh;
  color: var(--cream);
  max-width: 70vw;
  margin-left: auto;
  margin-right: auto;
}
.quiz-options {
  display: flex;
  flex-direction: column;
  gap: 1.5vh;
  max-width: 70vw;
  width: 100%;
  margin: 0 auto;
}
.quiz-option {
  display: flex;
  align-items: center;
  gap: 2vw;
  padding: 2.5vh 3vw;
  background: var(--charcoal);
  border: 2px solid transparent;
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.3s;
  text-align: left;
  backdrop-filter: blur(4px);
}
.quiz-option:hover {
  border-color: rgba(201,168,76,0.3);
  background: rgba(58,54,50,0.8);
}
.opt-letter {
  font-family: var(--font-ui);
  font-weight: 600;
  font-size: 1.1rem;
  color: var(--gold);
  flex-shrink: 0;
  width: 1.8em;
}
.quiz-option .opt-text {
  font-family: var(--font-body);
  font-size: clamp(0.85rem, 1.2vw, 1rem);
  color: var(--cream-dim);
  line-height: 1.5;
  font-weight: 300;
}
.quiz-option.selected {
  border-color: var(--gold);
  background: rgba(201,168,76,0.08);
}
.quiz-option.correct {
  border-color: var(--green-dim);
  background: rgba(74,107,74,0.15);
}
.quiz-option.incorrect {
  border-color: var(--red-dim);
  background: rgba(139,58,58,0.1);
  opacity: 0.6;
}
.quiz-option.correct .opt-letter { color: #7aad7a; }
.quiz-option.incorrect .opt-letter { color: #ad6a6a; }
.quiz-option.locked { pointer-events: none; }

.quiz-feedback {
  margin-top: 2.5vh;
  font-family: var(--font-body);
  font-size: 0.95rem;
  color: var(--cream-dim);
  font-style: italic;
  min-height: 2em;
  font-weight: 300;
}

.slide-results {
  text-align: center;
  background: linear-gradient(170deg, #252218 0%, var(--bg-dark) 100%);
}
.slide-results .results-label {
  font-family: var(--font-ui);
  font-size: clamp(0.8rem, 1.4vw, 1rem);
  text-transform: uppercase;
  letter-spacing: 0.3em;
  color: var(--gold);
  margin-bottom: 2vh;
  font-weight: 600;
}
.score-display {
  font-family: var(--font-display);
  font-size: clamp(4rem, 10vw, 8rem);
  font-weight: 900;
  line-height: 1;
  margin-bottom: 1vh;
}
.score-display.passed { color: var(--olive-light); }
.score-display.failed { color: var(--rust); }
.score-status {
  font-family: var(--font-display);
  font-size: clamp(1.2rem, 2vw, 1.6rem);
  font-weight: 700;
  margin-bottom: 3vh;
}
.score-status.passed { color: var(--olive-light); }
.score-status.failed { color: var(--rust); }
.score-detail {
  font-family: var(--font-body);
  font-size: 0.95rem;
  color: var(--cream-dim);
  margin-bottom: 4vh;
  font-weight: 300;
}

.waitlist-box {
  background: rgba(240,232,216,0.03);
  border: 1px solid rgba(240,232,216,0.1);
  border-radius: 4px;
  padding: 3vh 3vw;
  max-width: 480px;
  width: 100%;
}
.waitlist-box h3 {
  font-family: var(--font-display);
  font-size: clamp(1.1rem, 1.8vw, 1.4rem);
  font-weight: 700;
  color: var(--cream);
  margin-bottom: 1.5vh;
}
.waitlist-box p {
  font-family: var(--font-body);
  font-size: 0.9rem;
  color: var(--cream-dim);
  margin-bottom: 2vh;
  line-height: 1.6;
  font-weight: 300;
}
.waitlist-form {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}
.waitlist-form input[type="email"] {
  flex: 1;
  padding: 1.2vh 1.2vw;
  background: var(--bg-dark);
  border: 1px solid rgba(240,232,216,0.15);
  border-radius: 3px;
  color: var(--cream);
  font-family: var(--font-ui);
  font-size: 0.9rem;
  outline: none;
  transition: border-color 0.2s;
}
.waitlist-form input[type="email"]:focus {
  border-color: var(--gold);
}
.waitlist-form input[type="email"]::placeholder {
  color: rgba(240,232,216,0.3);
}
.waitlist-form button {
  padding: 1.2vh 2vw;
  background: var(--gold-dim);
  border: none;
  border-radius: 3px;
  color: var(--cream);
  font-family: var(--font-ui);
  font-size: 0.85rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  cursor: pointer;
  transition: background 0.2s;
  white-space: nowrap;
}
.waitlist-form button:hover {
  background: var(--gold);
  color: var(--bg-dark);
}
.waitlist-success {
  display: none;
  font-family: var(--font-body);
  font-size: 0.95rem;
  color: var(--olive-light);
  font-style: italic;
  padding: 1.5vh 0;
}

.bottom-bar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1.5vh 3vw;
  background: rgba(26,24,18,0.9);
  border-top: 1px solid rgba(240,232,216,0.06);
  z-index: 100;
  flex-shrink: 0;
}

.progress-section {
  display: flex;
  align-items: center;
  gap: 1.2vw;
  flex: 1;
}

.progress-track {
  flex: 1;
  height: 3px;
  background: rgba(240,232,216,0.08);
  border-radius: 2px;
  overflow: hidden;
  max-width: 400px;
}
.progress-fill {
  height: 100%;
  background: var(--gold-dim);
  border-radius: 2px;
  transition: width 0.4s ease;
}

.progress-text {
  font-family: var(--font-ui);
  font-size: 0.7rem;
  color: var(--cream-dim);
  letter-spacing: 0.05em;
  white-space: nowrap;
}

.nav-buttons {
  display: flex;
  gap: 0.6vw;
}
.nav-btn {
  background: transparent;
  border: 1px solid rgba(240,232,216,0.12);
  color: var(--cream-dim);
  font-family: var(--font-ui);
  font-size: 0.75rem;
  padding: 0.8vh 1.5vw;
  border-radius: 3px;
  cursor: pointer;
  transition: all 0.2s;
  text-transform: uppercase;
  letter-spacing: 0.1em;
}
.nav-btn:hover {
  border-color: rgba(240,232,216,0.3);
  color: var(--cream);
}
.nav-btn:disabled {
  opacity: 0.25;
  cursor: default;
}
.nav-btn:disabled:hover {
  border-color: rgba(240,232,216,0.12);
  color: var(--cream-dim);
}

.slide::after {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 3;
  background: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 2px,
    rgba(0,0,0,0.015) 2px,
    rgba(0,0,0,0.015) 4px
  );
}

@media (max-width: 768px) {
  .slide { padding: 3vh 5vw; }
  .slide-list { padding-left: 5vw; padding-right: 5vw; }
  .options-grid { flex-direction: column; align-items: center; }
  .option-card { width: 85vw; }
  .summary-grid { grid-template-columns: 1fr; }
  .waitlist-form { flex-direction: column; }
}
</style>
</head>
<body>

<div class="grain"></div>
<div class="vignette"></div>

<div class="player" id="player">
  <div class="slide-container" id="slideContainer"></div>

  <div class="bottom-bar">
    <a href="../index.html" class="nav-btn" style="margin-right: 2vw;">MENU</a>
    <div class="progress-section">
      <div class="progress-track">
        <div class="progress-fill" id="progressFill"></div>
      </div>
      <span class="progress-text" id="progressText">1 / 1</span>
    </div>
    <div class="nav-buttons">
      <button class="nav-btn" id="prevBtn" disabled>&#8592; Prev</button>
      <button class="nav-btn" id="nextBtn">Next &#8594;</button>
    </div>
  </div>
</div>

<script>
const MODULE = {
  title: "Build Your Playbook",
  moduleNumber: 5,
  partLabel: "Part Two — Work With the Machine",
  passingScore: 75,

  slides: [
    { type: "title", moduleLabel: "Module 5", heading: "Build Your Playbook", subtitle: "Part Two — Work With the Machine", brand: "SOPs Nobody Reads" },

    // Cold Open - Two Timelines
    { type: "scene", label: "Monday Morning", text: "Two versions of the same Monday morning. Same person — call her Dana, early 40s, director of client services at a mid-size firm. Two parallel timelines. Same task: respond to Northbridge, a long-standing client, about a missed Phase 2 deadline.", image: "img/s01-monday-morning.jpg" },
    { type: "scene", label: "Timeline A", text: "Dana opens AI. She knows what she's doing — she learned the skills. She writes a solid prompt with context, task, tone, boundaries. The response comes back. It's competent. But the tone is slightly off — a little too formal for this relationship.", image: "img/s02-timeline-a.jpg" },
    { type: "scene", label: "Timeline A Result", text: "Dana reads it, adjusts the opening, softens two sentences, makes it sound more like her. Sends it. Five minutes total. Good outcome.", image: "img/s03-timeline-a-result.jpg" },
    { type: "scene", label: "Timeline B", text: "Dana opens AI. Same task. But before she types, she drops in a one-page document. Then she writes a prompt — not longer, not more detailed. Just the task.", image: "img/s04-timeline-b.jpg" },
    { type: "scene", label: "Timeline B Result", text: "The response comes back. It's right. Not just structured well — it sounds like Dana. It opens the way she'd open with a client she's known for ten years. It handles the vendor issue with candor, not corporate hedging. Dana reads it, changes one word, hits send. Two minutes.", image: "img/s05-timeline-b-result.jpg" },
    { type: "reveal", kicker: "The Difference", heading: "Same person.\nSame skill level.\nSame AI.", body: "Timeline A wrote a good prompt and got a good result that needed adjusting. Timeline B wrote a shorter prompt and got a better result on the first try. The difference is one page.", image: "img/s06-difference.jpg" },

    // What Changed
    { type: "keypoint", kicker: "What Changed", heading: "The document Dana loaded\nis called a Working\nContext Document.", body: "Think of it as a playbook — a single reference that tells the machine who you are, how you work, what you care about, and what \"good\" looks like in your world.", image: "img/s07-playbook.jpg" },
    { type: "reveal", kicker: "The Power", heading: "This is the most valuable\nthing you'll build\nin this course.", body: "Not because it's complicated — it isn't. But because it turns everything you've learned so far into a permanent tool. The Sixty-Second Check, the four elements, the conversation skills — all embedded in a document you write once and use every day.", image: "img/s08-valuable-tool.jpg" },

    // What Goes In It
    { type: "concept", label: "Five Sections", boxText: "A Working Context Document has five sections. That's it.", body: "No special format, no template to buy. Just five things the machine needs to know about you to do consistently good work.", image: "img/s09-five-sections.jpg" },
    { type: "list", label: "Section One", heading: "Who you are.", items: [
      { num: "1.", text: "Your role. Your responsibilities. What you actually do day to day — not your job title, but the real work." },
      { num: "", text: "\"I'm the Director of Client Services at a 200-person consulting firm. I manage relationships with our top 15 accounts and oversee a team of 6 account managers.\"" },
      { num: "", text: "This tells the machine your vantage point. Everything it produces will be calibrated to someone at your level, with your scope." }
    ], image: "img/s10-who-you-are.jpg" },
    { type: "list", label: "Section Two", heading: "Who you talk to.", items: [
      { num: "2.", text: "Your key audiences. Not a list of every person you email — the categories of people you communicate with regularly and what matters to each of them." },
      { num: "", text: "\"My clients are senior executives who want concise updates, not details. My team needs clear direction with enough context to act independently. My CEO wants bottom-line impact, not process.\"" },
      { num: "", text: "The machine can't adjust tone for your audience if it doesn't know who your audiences are." }
    ], image: "img/s11-who-you-talk-to.jpg" },
    { type: "list", label: "Section Three", heading: "How you sound.", items: [
      { num: "3.", text: "Your voice. Your communication style. And be specific — not \"professional\" but the real thing." },
      { num: "", text: "\"I'm direct but not blunt. I acknowledge problems before jumping to solutions. I don't use buzzwords. I write short sentences. When I give feedback, I lead with what's working before I address what isn't.\"" },
      { num: "", text: "This is the section most people skip, and it's the one that makes the biggest difference." }
    ], image: "img/s12-how-you-sound.jpg" },
    { type: "keypoint", kicker: "Voice Section Tip", heading: "Go back through\nyour last twenty emails.", body: "The ones you wrote yourself, not the ones you agonized over. The ones you fired off in two minutes because you knew exactly what to say. Look at the patterns. That's your voice. Write it down.", image: "img/s13-voice-tip.jpg" },
    { type: "list", label: "Section Four", heading: "What good looks like.", items: [
      { num: "4.", text: "Your standards. Your definition of done. What makes you hit send immediately versus what makes you rewrite the whole thing." },
      { num: "", text: "\"A good client email from me is under 150 words, addresses the issue in the first sentence, and ends with a clear next step. A good internal update leads with the decision, then supporting context, never the other way around.\"" },
      { num: "", text: "This section is your quality filter. It gives the machine a finish line so it's not guessing what you'll accept." }
    ], image: "img/s14-what-good-looks-like.jpg" },
    { type: "list", label: "Section Five", heading: "What to avoid.", items: [
      { num: "5.", text: "Your boundaries. The things that make you cringe. The patterns you never want to see." },
      { num: "", text: "\"Never open with 'I hope this email finds you well.' Don't use the word 'synergy.' Don't hedge with phrases like 'I just wanted to check in' — if I'm checking in, say so directly. Don't bullet-point everything — I write in prose.\"" },
      { num: "", text: "Telling the machine what NOT to do is one of the most powerful instructions you can give." }
    ], image: "img/s15-what-to-avoid.jpg" },

    // Let's Build One
    { type: "scene", label: "Joe's Back", text: "Joe's desk. He's got a blank document open and his AI ready. Joe's going to build his Working Context Document with the machine's help. Not by filling in a template — by having a conversation about his work and letting the structure emerge.", image: "img/s16-joes-back.jpg" },
    { type: "scene", label: "Joe's First Message", text: "Joe types: <em>\"I want to create a reference document about how I work so I can use it in future conversations with you. I'm a regional sales rep for an industrial supply company. I cover the Mountain West — Colorado, Utah, Wyoming, Montana...\"</em>", image: "img/s17-joes-first.jpg" },
    { type: "keypoint", kicker: "The Process", heading: "Joe isn't filling out a form.\nHe's describing his work.", body: "The same way he'd explain it to a new colleague on their first day. And the machine is helping him organize it into something structured and reusable.", image: "img/s18-describing-work.jpg" },
    { type: "scene", label: "Joe's Refinement", text: "The AI produces a draft Working Context Document. Clean. Organized into the five sections. It captures Joe's role, his accounts, his voice (\"casual, direct, knows the products\"), his standards (\"short emails, no formal proposals unless asked\").", image: "img/s19-joes-draft.jpg" },
    { type: "scene", label: "Joe's Addition", text: "Joe reads it. Adds one thing — his key account Dave Kowalski at Pacific Ridge Supply, because that relationship has specific dynamics the machine should know about. He also adds: <em>\"When I'm writing to a new contact, I mention a specific product or industry challenge so they know I've done my homework.\"</em>", image: "img/s20-joes-addition.jpg" },
    { type: "reveal", kicker: "Ten Minutes", heading: "Joe now has a document\nthat makes every future\nAI conversation start\nfrom a foundation\nof context.", body: "Instead of re-explaining his role, his tone, and his audience every time, he drops this in and goes straight to the task.", image: "img/s21-foundation.jpg" },
    { type: "keypoint", kicker: "Joe's Arc", heading: "From a vague instruction\nthat produced\ngeneric output—", body: "to a targeted, context-rich conversation that produces work Joe would actually send. That's the arc of this entire course.", image: "img/s22-joes-arc.jpg" },

    // It's a Living Document
    { type: "keypoint", kicker: "Living Document", heading: "Your Working Context\nDocument is not a\none-time exercise.", body: "It's alive. It changes as your work changes. New client with unusual requirements? Add a note. Realized you keep correcting the same tone issue? Update your voice section.", image: "img/s23-living-document.jpg" },
    { type: "concept", label: "Like Training", boxText: "Think of it like training a new team member.", body: "The first week, you explain everything. The second week, you explain less. By the third month, they know your preferences and you just say \"handle it.\" Your context document is that training — except it happens in a page instead of a quarter.", image: "img/s24-training-analogy.jpg" },

    // The Compound Effect
    { type: "keypoint", kicker: "The Math", heading: "Let's say that saves you\nfive minutes\nper interaction.", body: "If you use AI ten times a day — and once you're comfortable, you will — that's fifty minutes. Every day. That's over four hours a week of setup time you'll never spend again.", image: "img/s25-time-savings.jpg" },
    { type: "reveal", kicker: "The Real Savings", heading: "But the real savings\nisn't time. It's quality.", body: "Because every interaction starts from a higher baseline, you spend less time iterating. Less time correcting tone. Less time adding context you forgot to include. The compound effect of consistently better starting points is the difference between AI being a novelty and AI being essential to how you work.", image: "img/s26-quality-improvement.jpg" },

    // Your Turn
    { type: "reveal", kicker: "Your Exercise", heading: "Build your Working\nContext Document.\nRight now.", body: "Open a conversation with AI and tell it what you just watched Joe do. Then talk about your work. Start with who you are and what you actually do. Not your title — your real work.", image: "img/s27-your-turn.jpg" },
    { type: "keypoint", kicker: "Don't Aim for Perfect", heading: "Your first version\nwill be incomplete.\nThat's fine.", body: "Use it for a day. See what's missing. Add it. Use it again. Refine it. Within a week, you'll have a document that makes AI feel like it knows you.", image: "img/s28-iterate.jpg" },
    { type: "reveal", kicker: "The Point", heading: "This is the whole point\nof this course.", body: "Not \"how to prompt.\" Not \"AI tips and tricks.\" How to take what you know — the tacit knowledge that makes you good at your job — and make it explicit in a way that any capable system can use to help you work faster, better, and more like yourself.", image: "img/s29-whole-point.jpg" },
    { type: "keypoint", kicker: "The Proof", heading: "Your Working Context\nDocument is the proof\nthat you've made that shift.", body: "Keep it. Update it. Use it every day. It's the most valuable page you'll write this year.", image: "img/s30-valuable-page.jpg" },

    { type: "summary", heading: "Module 5 — Key Concepts", items: [
      "A Working Context Document is a reusable reference that gives AI your role, voice, audiences, standards, and boundaries",
      "Five sections: Who You Are, Who You Talk To, How You Sound, What Good Looks Like, What to Avoid",
      "Build it as a conversation with AI, not by filling in a template",
      "Same prompt effort, better output — the document elevates quality without adding work",
      "It's a living document — update it as your work changes",
      "The compound effect: better starting points → less iteration → consistently higher quality output",
      "Repeatability: the document works tomorrow, next week, and next month without rebuilding",
      "Your voice section is the most impactful — go read your own sent emails to find it",
      "This is the capstone of the course: your tacit knowledge, made explicit, made permanent"
    ] },
  ],

  quiz: [
    { question: "What is the primary purpose of a Working Context Document?", options: ["To store all of your company's proprietary information for the AI", "To provide reusable context so every AI interaction starts from a higher baseline instead of from zero", "To replace your company's employee handbook", "To give the AI permanent memory that persists across all conversations"], correct: 1 },
    { question: "In the cold open, both Dana A and Dana B wrote strong prompts. Dana B got better output because:", options: ["She used a more expensive AI model", "She wrote a longer, more detailed prompt", "Her Working Context Document gave the AI her voice, standards, and relationship context — so the output was right on the first try", "She copied a template from the internet"], correct: 2 },
    { question: "Which section of the Working Context Document typically makes the biggest difference in output quality?", options: ["Who You Are (your role and responsibilities)", "How You Sound (your voice and communication style)", "Who You Talk To (your key audiences)", "What to Avoid (your boundaries and pet peeves)"], correct: 1 },
    { question: "You've been using your Working Context Document for two weeks. The AI keeps producing responses that are too formal for your internal team updates, even though it gets client emails right. What should you do?", options: ["Delete the document and start over", "Add a note to your voice section that specifies how internal communication differs from client communication", "Stop using the document for internal tasks", "Add \"be more casual\" to every prompt"], correct: 1 },
  ],
};

(function() {
  const container = document.getElementById('slideContainer');
  const progressFill = document.getElementById('progressFill');
  const progressText = document.getElementById('progressText');
  const prevBtn = document.getElementById('prevBtn');
  const nextBtn = document.getElementById('nextBtn');

  let currentSlide = 0;
  let quizAnswers = {};
  let quizRevealed = {};
  let totalScreens = 0;

  function buildSlides() {
    MODULE.slides.forEach((s, i) => {
      const el = document.createElement('div');
      el.className = `slide slide-${s.type}`;
      el.dataset.index = i;
      if (s.image) {
        el.classList.add('has-image');
        el.style.backgroundImage = `url('${s.image}')`;
      }
      el.innerHTML = renderSlide(s, i);
      container.appendChild(el);
    });

    MODULE.quiz.forEach((q, i) => {
      const el = document.createElement('div');
      el.className = 'slide slide-quiz';
      el.dataset.index = MODULE.slides.length + i;
      el.dataset.quizIndex = i;
      el.innerHTML = renderQuiz(q, i);
      container.appendChild(el);
    });

    const results = document.createElement('div');
    results.className = 'slide slide-results';
    results.dataset.index = MODULE.slides.length + MODULE.quiz.length;
    results.id = 'resultsSlide';
    results.innerHTML = renderResults();
    container.appendChild(results);

    totalScreens = MODULE.slides.length + MODULE.quiz.length + 1;
  }

  function renderSlide(s) {
    switch(s.type) {
      case 'title':
        return `<span class="module-label">${s.moduleLabel}</span><h1>${s.heading.replace(/\n/g,'<br>')}</h1><p class="subtitle">${s.subtitle}</p><span class="brand">${s.brand}</span>`;
      case 'scene':
        return `<span class="scene-label">${s.label}</span><p class="scene-text">${s.text}</p>`;
      case 'keypoint':
        return `${s.kicker ? `<span class="kicker">${s.kicker}</span>` : ''}<h2>${s.heading.replace(/\n/g,'<br>')}</h2><p class="body">${s.body}</p>`;
      case 'options':
        return `<h2>${s.heading}</h2><div class="options-grid">${s.options.map(o => `<div class="option-card"><div class="option-letter">${o.letter}</div><h3>${o.title}</h3><p>${o.desc}</p></div>`).join('')}</div>`;
      case 'reveal':
        return `<span class="reveal-kicker">${s.kicker}</span><h2>${s.heading.replace(/\n/g,'<br>')}</h2><p class="body">${s.body}</p>`;
      case 'concept':
        return `<span class="concept-label">${s.label}</span><div class="concept-box"><h2>${s.boxText}</h2></div><p class="body">${s.body}</p>`;
      case 'list':
        return `<span class="list-label">${s.label}</span><h2>${s.heading}</h2><ul class="list-items">${s.items.map(item => `<li data-num="${item.num}">${item.text}</li>`).join('')}</ul>`;
      case 'summary':
        return `<h2>${s.heading}</h2><div class="summary-grid">${s.items.map(item => `<div class="summary-item">${item}</div>`).join('')}</div>`;
      default:
        return `<p>${JSON.stringify(s)}</p>`;
    }
  }

  function renderQuiz(q, i) {
    const letters = ['A','B','C','D'];
    return `<span class="quiz-label">Knowledge Check</span><span class="quiz-counter">Question ${i+1} of ${MODULE.quiz.length}</span><h2>${q.question}</h2><div class="quiz-options" data-qi="${i}">${q.options.map((opt, oi) => `<div class="quiz-option" data-qi="${i}" data-oi="${oi}" onclick="handleQuizClick(${i},${oi})"><span class="opt-letter">${letters[oi]}</span><span class="opt-text">${opt}</span></div>`).join('')}</div><div class="quiz-feedback" id="feedback-${i}"></div>`;
  }

  function renderResults() {
    return `<span class="results-label">Results</span><div class="score-display" id="scoreDisplay">—</div><div class="score-status" id="scoreStatus"></div><p class="score-detail" id="scoreDetail"></p><div class="waitlist-box"><h3>This was Module 5 of 6.</h3><p>The full course covers: how AI actually processes language, why the real problem is usually you, how to communicate precisely with AI, building your personal playbook, and the ethical rules of the road.</p><div class="waitlist-form" id="waitlistForm"><input type="email" placeholder="your@email.com" id="waitlistEmail"><button onclick="handleWaitlist()">Get Early Access</button></div><div class="waitlist-success" id="waitlistSuccess">You're on the list. We'll be in touch.</div></div>`;
  }

  function goToSlide(index) {
    if (index < 0 || index >= totalScreens) return;
    currentSlide = index;
    document.querySelectorAll('.slide').forEach(s => s.classList.remove('active'));
    const target = document.querySelector(`.slide[data-index="${index}"]`);
    if (target) target.classList.add('active');
    const pct = ((index + 1) / totalScreens) * 100;
    progressFill.style.width = pct + '%';
    progressText.textContent = `${index + 1} / ${totalScreens}`;
    prevBtn.disabled = index === 0;
    const isQuizSlide = index >= MODULE.slides.length && index < MODULE.slides.length + MODULE.quiz.length;
    const quizIdx = index - MODULE.slides.length;
    if (isQuizSlide && !quizRevealed[quizIdx]) {
      nextBtn.disabled = true;
    } else if (index === totalScreens - 1) {
      nextBtn.disabled = true;
    } else {
      nextBtn.disabled = false;
    }
    if (index === totalScreens - 1) showResults();
    scormSetValue('cmi.core.lesson_location', index.toString());
    scormCommit();
  }

  window.handleQuizClick = function(qi, oi) {
    if (quizRevealed[qi]) return;
    quizAnswers[qi] = oi;
    quizRevealed[qi] = true;
    const correct = MODULE.quiz[qi].correct;
    const options = document.querySelectorAll(`.quiz-option[data-qi="${qi}"]`);
    options.forEach(opt => {
      const oIdx = parseInt(opt.dataset.oi);
      opt.classList.add('locked');
      if (oIdx === correct) opt.classList.add('correct');
      if (oIdx === oi && oi !== correct) opt.classList.add('incorrect');
    });
    const feedback = document.getElementById(`feedback-${qi}`);
    if (oi === correct) {
      feedback.textContent = 'Correct.';
      feedback.style.color = 'var(--olive-light)';
    } else {
      feedback.textContent = 'Not quite. The correct answer is highlighted above.';
      feedback.style.color = 'var(--rust-light)';
    }
    nextBtn.disabled = false;
  };

  function showResults() {
    let correct = 0;
    MODULE.quiz.forEach((q, i) => { if (quizAnswers[i] === q.correct) correct++; });
    const pct = Math.round((correct / MODULE.quiz.length) * 100);
    const passed = pct >= MODULE.passingScore;
    document.getElementById('scoreDisplay').textContent = pct + '%';
    document.getElementById('scoreDisplay').className = 'score-display ' + (passed ? 'passed' : 'failed');
    document.getElementById('scoreStatus').textContent = passed ? 'Passed' : 'Not Quite';
    document.getElementById('scoreStatus').className = 'score-status ' + (passed ? 'passed' : 'failed');
    document.getElementById('scoreDetail').textContent = `${correct} of ${MODULE.quiz.length} correct. ${MODULE.passingScore}% required to pass.`;
    scormSetValue('cmi.core.score.raw', pct.toString());
    scormSetValue('cmi.core.score.min', '0');
    scormSetValue('cmi.core.score.max', '100');
    scormSetValue('cmi.core.lesson_status', passed ? 'passed' : 'failed');
    scormCommit();
  }

  window.handleWaitlist = function() {
    const email = document.getElementById('waitlistEmail').value;
    if (!email || !email.includes('@')) return;
    const btn = document.querySelector('.waitlist-form button');
    btn.textContent = 'Sending...';
    btn.disabled = true;
    fetch('https://formspree.io/f/xnjbowwy', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ email: email, source: 'module-05-results' })
    }).then(function(res) {
      if (res.ok) {
        document.getElementById('waitlistForm').style.display = 'none';
        document.getElementById('waitlistSuccess').style.display = 'block';
      } else {
        btn.textContent = 'Try Again';
        btn.disabled = false;
      }
    }).catch(function() {
      btn.textContent = 'Try Again';
      btn.disabled = false;
    });
  };

  let SCORM_API = null;

  function findAPI(win) {
    try {
      let attempts = 0;
      while (attempts < 10) {
        try { if (win.API) return win.API; } catch (e) { return null; }
        try { if (!win.parent || win.parent === win) break; win = win.parent; } catch (e) { return null; }
        attempts++;
      }
    } catch (e) {}
    return null;
  }

  function initSCORM() {
    try {
      SCORM_API = findAPI(window);
      if (!SCORM_API && window.opener) {
        try { SCORM_API = findAPI(window.opener); } catch (e) {}
      }
      if (SCORM_API) {
        SCORM_API.LMSInitialize('');
        const status = SCORM_API.LMSGetValue('cmi.core.lesson_status');
        if (status === 'not attempted' || status === '') {
          SCORM_API.LMSSetValue('cmi.core.lesson_status', 'incomplete');
          SCORM_API.LMSCommit('');
        }
        const bookmark = SCORM_API.LMSGetValue('cmi.core.lesson_location');
        if (bookmark && bookmark !== '') currentSlide = parseInt(bookmark, 10);
      }
    } catch (e) {
      SCORM_API = null;
    }
  }

  function scormSetValue(key, val) {
    try { if (SCORM_API) SCORM_API.LMSSetValue(key, val); } catch (e) {}
  }
  function scormCommit() {
    try { if (SCORM_API) SCORM_API.LMSCommit(''); } catch (e) {}
  }

  function preloadImages() {
    MODULE.slides.forEach(s => {
      if (s.image) {
        const img = new Image();
        img.src = s.image;
      }
    });
  }

  document.addEventListener('keydown', function(e) {
    if (e.key === 'ArrowRight' || e.key === ' ') { e.preventDefault(); if (!nextBtn.disabled) goToSlide(currentSlide + 1); }
    if (e.key === 'ArrowLeft') { e.preventDefault(); if (!prevBtn.disabled) goToSlide(currentSlide - 1); }
  });
  prevBtn.addEventListener('click', () => goToSlide(currentSlide - 1));
  nextBtn.addEventListener('click', () => goToSlide(currentSlide + 1));
  window.addEventListener('beforeunload', function() {
    try {
      if (SCORM_API) { scormSetValue('cmi.core.exit', 'suspend'); SCORM_API.LMSFinish(''); }
    } catch (e) {}
  });

  buildSlides();
  preloadImages();
  initSCORM();
  goToSlide(currentSlide);
})();
</script>

</body>
</html>